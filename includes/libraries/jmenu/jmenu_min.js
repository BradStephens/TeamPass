jQuery.fn.reverse=[].reverse;(function(a){a.fn.menubar=function(b,c){function s(b){clearTimeout(f);var c=b.children("ul").length>0;b.children("ul").hide();b.removeClass("ui-state-active");b.find(".ui-menu-parent-icon").removeClass("ui-state-active");b.find(".ui-menu-check-icon").removeClass("ui-state-active");if(b.hasClass("ui-menu-togglable")){b.siblings("li").each(function(){if(a(this).hasClass("ui-state-active")&&!a(this).hasClass("ui-menu-togglable")){a(this).click()}})}if(c){l(b)}}function r(c){c.addClass("ui-state-active");c.siblings("li").each(function(){if(a(this).hasClass("ui-state-active")&&!a(this).hasClass("ui-menu-togglable")){a(this).click()}});c.find(".ui-menu-parent-icon").addClass("ui-state-active");c.children("ul").find(".ui-menu-parent-icon").removeClass("ui-state-active");c.find(".ui-menu-check-icon").addClass("ui-state-active");c.children("ul").find(".ui-menu-check-icon").removeClass("ui-state-active");f=setTimeout(function(){var b=false;c.children("ul").show().each(function(){var c=0;a(this).children("li").each(function(){a(this).css("display","block").css("width","auto");c=Math.max(c,a(this).outerWidth())}).width(c*1.05);a(this).css("height",a(this).height());if(!a(this).parent().hasClass("ui-menu-title")){a(this).css("left",a(this).parent().outerWidth());a(this).css("top",a(this).parent().position().top)}else{a(this).css("top",a(this).parent().outerHeight()+a(this).parent().position().top);a(this).css("left",a(this).parent().offset().left)}a(this).children("li").children(".ui-menu-parent-icon"+", ."+"ui-menu-check-icon").each(function(){var b=(a(this).closest("li").height()-a(this).height())/2;if(parseInt(a(this).css("margin-top"))==0){a(this).css("margin-top",b)}if(a(this).hasClass("ui-menu-parent-icon")){var c=a(this).closest("li").width()-a(this).width();a(this).css("margin-left",c)}});b=true});if(b){k(c)}},c.hasClass("ui-menu-title")?0:b.menuOpenDelay)}function q(a){h(a,"selectoff");h(a,"select",false)}function p(a){h(a,"selecton");h(a,"select",true)}function o(a){}function n(a){h(a,"selectoff");h(a,"select",false)}function m(a){h(a,"selecton");h(a,"select",true)}function l(a){h(a,"close")}function k(a){h(a,"open")}function j(a){h(a,"hoveroff")}function i(a){h(a,"hoveron")}function h(b,c,d){var e=a(b).data("item");if(e!=null){var f=e[c];if(f!=null){f(d)}}b.trigger("menu"+c,d)}function g(b,c){var d=a("<ul></ul>");a.each(c,function(c,e){var f=a("<li"+(e.checkable?' class="ui-menu-checkable" ':"")+"></li>");var h=a("<label>"+e.name+"</label>");f.append(h);d.append(f);if(e.attr!=null){for(var i in e.attr){f.attr(i,e.attr[i])}}a(f).data("item",e);if(e.items!=null){g(f,e.items)}else if(!b.is("ul")&&e.checkable){f.addClass("ui-menu-togglable")}else if(!b.is("ul")&&!e.checkable){f.addClass("ui-menu-clickable")}if(e.disabled){f.addClass("ui-state-disabled")}});b.append(d)}function d(b){return a(b).hasClass("ui-state-disabled")||a(b).parents().hasClass("ui-state-disabled")}if(b=="disable"){a(this).addClass("ui-state-disabled");return}else if(b=="enable"){a(this).removeClass("ui-state-disabled");return}else if(b=="enableall"){a(this).removeClass("ui-state-disabled");a(this).find(".ui-state-disabled").removeClass("ui-state-disabled");return}else if(b=="name"){a(this).find("label:first").html(c);return}else if(b=="selecton"){a(this).addClass("ui-state-active");return}else if(b=="selectoff"){a(this).removeClass("ui-state-active");return}var e={addArrow:true,titleArrowText:"<small> &#9660;</small>",menuOpenDelay:200,closeOnEsc:true,items:undefined};var b=a.extend(e,b);var f;this.each(function(){g(a(this),b.items)});return this.each(function(){function e(){c.find(".ui-state-active").reverse().each(function(){if(!a(this).hasClass("ui-menu-togglable")){a(this).click()}})}a(this).bind("mousedown",function(b){a("body").trigger("mousedown");return false});var c=a(this).children("ul:first");a(this).addClass("ui-corner-all outline ui-menu-bar ui-widget ui-widget-content");c.addClass("ui-menu-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-top");c.children("li").addClass("ui-state-default ui-corner-all");c.find("ul").each(function(){a(this).children("li:first").addClass("ui-corner-top").addClass("ui-menu-item-first");a(this).children("li:last").addClass("ui-corner-bottom").addClass("ui-menu-item-last");a(this).children("li").each(function(){if(a(this).children("ul").length>0){a(this).addClass("ui-menu-item-parent");a(this).prepend('<div style="position: absolute" class="ui-menu-parent-icon ui-icon ui-icon-triangle-1-e"></div>')}if(a(this).hasClass("ui-menu-checkable")){a(this).prepend('<div style="position: absolute" class="ui-menu-check-icon ui-icon ui-icon-check"></div>');if(a(this).data("item").checked){a(this).children(".ui-menu-check-icon").addClass("ui-menu-checked")}a(this).click(function(){if(!d(a(this))){var b=a(this).children(".ui-menu-check-icon");b.toggleClass("ui-menu-checked");if(b.hasClass("ui-menu-checked")){m(a(this))}else{n(a(this))}}})}})});c.find("li").addClass("ui-menu-item");c.children("li").removeClass("ui-menu-item").addClass("ui-menu-title");c.children("li").each(function(){if(a(this).children("ul").length>0){a(this).find("label:first").append(b.titleArrowText)}else if(!a(this).hasClass("ui-menu-clickable")){a(this).addClass("ui-menu-togglable")}});c.find("ul").each(function(){if(a(this).parent().hasClass("ui-menu-title")){a(this).addClass("ui-top-menu")}else{a(this).addClass("ui-sub-menu")}});c.find(".ui-top-menu").children(".ui-menu-item-first");c.find("ul").css("position","absolute").css("z-index",999).hide();c.children("li").not(".ui-menu-title.ui-menu-clickable").not(".ui-menu-title.ui-menu-checkable").toggle(function(){if(!d(a(this))){r(a(this))}},function(){if(!d(a(this))){s(a(this))}});c.children("li.ui-menu-title.ui-menu-checkable").each(function(){if(a(this).data("item").checked){a(this).addClass("ui-state-active")}}).click(function(){if(!d(a(this))&&a(this).hasClass("ui-state-active")){s(a(this))}else if(!d(a(this))){r(a(this))}});c.children("li.ui-menu-title.ui-menu-clickable").mousedown(function(){if(!d(a(this))){a(this).addClass("ui-state-active")}}).mouseup(function(){if(!d(a(this))){a(this).removeClass("ui-state-active");o(a(this));p(a(this))}}).bind("mouseout",function(){if(!d(a(this))){a(this).removeClass("ui-state-active")}});c.find(".ui-menu-item").mouseenter(function(){if(!d(a(this))){i(a(this));r(a(this))}}).mouseleave(function(){if(!d(a(this))){j(a(this));s(a(this))}});c.find("li").click(function(){if(a(this).find(".ui-menu-item.ui-state-active").length>0||d(a(this))){return}if(a(this).hasClass("ui-state-active")||a(this).hasClass("ui-menu-togglable")){o(a(this));if(a(this).is(".ui-menu-togglable.ui-menu-title")){if(a(this).hasClass("ui-state-active")){p(a(this))}else{q(a(this))}}else if(!a(this).is(".ui-menu-checkable")&&!a(this).is(".ui-menu-title")){p(a(this))}}});a("html").bind("click",function(){e()});if(b.closeOnEsc){a("body").bind("keydown",function(a){if(a.which==27){e()}})}})}})(jQuery)